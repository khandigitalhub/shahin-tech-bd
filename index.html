<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shahin Tech BD</title>

<style>
body{margin:0;font-family:Arial;background:#f5f5f5}
.header{background:#ff6a00;padding:10px;position:sticky;top:0;z-index:1000}
.search-box{background:white;border-radius:30px;display:flex;align-items:center;padding:8px 15px}
.search-box input{border:none;outline:none;flex:1}
.banner{width:100%;overflow:hidden}
.banner img{width:100%;height:150px;object-fit:cover}
.categories{display:flex;overflow:auto;gap:10px;background:white;padding:10px}
.categories button{border:none;background:#fff3e6;padding:8px 15px;border-radius:20px}
.products{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:8px}
.card{background:white;border-radius:10px;padding:8px;box-shadow:0 2px 6px rgba(0,0,0,.1);position:relative}
.card img{width:100%;border-radius:8px}
.price{color:#ff6a00;font-weight:bold}
.old{text-decoration:line-through;color:gray;font-size:12px}
.badge{position:absolute;top:8px;left:8px;background:red;color:white;font-size:10px;padding:3px 6px;border-radius:10px}
button{background:#ff6a00;color:white;border:none;padding:8px;border-radius:6px;margin-top:5px;width:100%}
.bottom{position:fixed;bottom:0;width:100%;background:white;display:flex;justify-content:space-around;padding:10px 0;box-shadow:0 -2px 5px rgba(0,0,0,.2)}
.cart-count{position:absolute;top:5px;right:20px;background:red;color:white;border-radius:50%;padding:2px 6px;font-size:12px}
.modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:none;justify-content:center;align-items:center}
.modal-content{background:white;width:95%;max-height:95%;overflow:auto;border-radius:10px;padding:15px}
input,select{width:100%;padding:8px;margin:5px 0}
.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);background:black;color:white;padding:10px 20px;border-radius:20px;display:none}
.footer{background:#222;color:white;padding:20px;font-size:13px;margin-top:20px}
</style>
</head>
<body>

<div class="header">
<div class="search-box">
<input type="text" placeholder="Search products..." onkeyup="searchProduct(this.value)">
</div>
</div>

<div class="banner">
<img src="https://i.imgur.com/7YQZ6Fh.jpg">
</div>

<div class="categories" id="categoryList"></div>
<div class="products" id="productList"></div>

<div class="footer">
<h3>Shahin Tech BD</h3>
<p>Phone: +8801777127628</p>
<p>Email: onlinebusinesservice24@gmail.com</p>
<p>Address: à¦ªà¦¾à¦ à¦¾à¦¨à¦ªà¦¾à¦¡à¦¼à¦¾ à¦¬à¦¾à¦œà¦¾à¦°, à¦œà¦²à¦¢à¦¾à¦•à¦¾, à¦¨à§€à¦²à¦«à¦¾à¦®à¦¾à¦°à§€</p>
<p>Delivery: à¦œà¦²à¦¢à¦¾à¦•à¦¾ à§«à§¦à§³ | à¦¨à§€à¦²à¦«à¦¾à¦®à¦¾à¦°à§€ à§­à§«à§³ | à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶ à§§à§¨à§¦à§³</p>
<p>Privacy Policy | Return Policy | Terms & Conditions</p>
</div>

<div class="bottom">
<div onclick="goHome()">Home</div>
<div onclick="openCart()">Cart <span id="cartCount" class="cart-count">0</span></div>
</div>

<div class="modal" id="modal">
<div class="modal-content" id="modalContent"></div>
</div>

<div class="toast" id="toast"></div>

<script>

const sheetURL="https://script.google.com/macros/s/AKfycbxsJm5bOqhSJSbT-mrhlCV4lBAhNvWuL5HiejIYH7GrqUo-M4wg7DXm29ePapMot2iq/exec";

let products=[];
let cart=[];

fetch(sheetURL)
.then(res=>res.json())
.then(data=>{
products=data.filter(p=>p.status && p.status.toLowerCase()=="show");
createCategories();
renderProducts(products);
});

function createCategories(){
let cats=[...new Set(products.map(p=>p.category))];
let html=`<button onclick="renderProducts(products)">All</button>`;
cats.forEach(c=>{html+=`<button onclick="filterCategory('${c}')">${c}</button>`});
document.getElementById("categoryList").innerHTML=html;
}

function renderProducts(data){
let html="";
if(data.length==0){html="<p>No Product Found</p>"}
data.forEach(p=>{
html+=`
<div class="card">
${p.badge?`<div class="badge">${p.badge}</div>`:""}
<img src="${p.image}" onclick='openDetails(${JSON.stringify(p)})'>
<h4>${p.name}</h4>
<div class="price">à§³ ${p.price}</div>
${p.oldprice?`<div class="old">à§³ ${p.oldprice}</div>`:""}
<button onclick='addToCart(${JSON.stringify(p)})'>Add to Cart</button>
<button onclick='buyNow(${JSON.stringify(p)})'>Buy Now</button>
</div>`;
});
document.getElementById("productList").innerHTML=html;
}

function filterCategory(cat){renderProducts(products.filter(p=>p.category==cat))}
function searchProduct(val){
val=val.toLowerCase();
renderProducts(products.filter(p=>p.name.toLowerCase().includes(val)||p.category.toLowerCase().includes(val)));
}

function addToCart(p){
cart.push(p);
document.getElementById("cartCount").innerText=cart.length;
showToast("Added to cart");
}

function openCart(){
if(cart.length==0){showToast("Cart is empty");return;}
let html="<h3>Your Cart</h3>";
cart.forEach((p,i)=>{
html+=`
<p>${p.name} - à§³ ${p.price}</p>
<button onclick="removeCart(${i})">Remove</button>
`;
});
html+=`<button onclick="checkout()">Proceed to Checkout</button>`;
openModal(html);
}

function removeCart(i){
cart.splice(i,1);
document.getElementById("cartCount").innerText=cart.length;
openCart();
}

function checkout(){
openModal(`
<h3>Checkout</h3>
<label>Name</label>
<input id="cName">
<label>Phone</label>
<input id="cPhone">
<label>Address</label>
<input id="cAddress">
<label>Delivery Area</label>
<select id="cArea">
<option value="50">à¦œà¦²à¦¢à¦¾à¦•à¦¾ (50à§³)</option>
<option value="75">à¦¨à§€à¦²à¦«à¦¾à¦®à¦¾à¦°à§€ (75à§³)</option>
<option value="120">à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶ (120à§³)</option>
</select>
<label>Payment</label>
<select id="cPay">
<option>Cash On Delivery</option>
<option>Bkash</option>
<option>Nagad</option>
<option>Rocket</option>
</select>
<button onclick="confirmOrder()">Confirm Order</button>
`);
}

function confirmOrder(){
let total=cart.reduce((sum,p)=>sum+parseInt(p.price),0);
let delivery=parseInt(document.getElementById("cArea").value);
let finalTotal=total+delivery;

let order={
CustomerName:document.getElementById("cName").value,
Phone:document.getElementById("cPhone").value,
Address:document.getElementById("cAddress").value,
PaymentMethod:document.getElementById("cPay").value,
ProductList:JSON.stringify(cart),
Status:"Pending"
};

fetch(sheetURL,{method:"POST",body:JSON.stringify(order)})
.then(()=>{
cart=[];
document.getElementById("cartCount").innerText=0;
closeModal();
showToast("ðŸŽ‰ Order Confirmed! Total à§³ "+finalTotal);
});
}

function buyNow(p){cart=[p];checkout()}

function openDetails(p){
openModal(`
<h3>${p.name}</h3>
<img src="${p.image}" style="width:100%">
<p>${p.description||""}</p>
<div class="price">à§³ ${p.price}</div>
<button onclick='addToCart(${JSON.stringify(p)})'>Add to Cart</button>
`);
}

function openModal(html){
document.getElementById("modal").style.display="flex";
document.getElementById("modalContent").innerHTML=html+`<button onclick="closeModal()">Close</button>`;
}

function closeModal(){document.getElementById("modal").style.display="none"}
function goHome(){renderProducts(products)}

function showToast(msg){
let t=document.getElementById("toast");
t.innerText=msg;
t.style.display="block";
setTimeout(()=>{t.style.display="none"},2000);
}

</script>
</body>
</html>
