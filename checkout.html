<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout</title>

<style>
body{font-family:Arial;background:#f2f2f2;padding:10px;padding-bottom:80px;}
.box{background:#fff;padding:15px;border-radius:12px;margin-bottom:15px;}
.product{display:flex;gap:10px;margin-bottom:10px;}
.product img{width:60px;border-radius:6px;}
.total-box{background:#fff3e0;padding:10px;border-radius:10px;}
button{
background:#ff3d00;
color:#fff;
padding:12px;
border:none;
width:100%;
border-radius:8px;
font-size:16px;
}
</style>
</head>
<body>

<h2>Checkout</h2>

<div class="box" id="userBox"></div>

<div class="box">
<h3>Products</h3>
<div id="productList"></div>
</div>

<div class="box">
<h3>Delivery Option</h3>

<select id="delivery" onchange="updateTotal()" style="width:100%;padding:8px;border-radius:6px;">
<option value="50">জলঢাকা উপজেলার ভিতরে - ৫০ টাকা</option>
<option value="80">নীলফামারী জেলার মধ্যে - ৮০ টাকা</option>
<option value="120">সারাদেশে - ১২০ টাকা</option>
</select>

<div class="total-box" style="margin-top:10px;">
<p>Subtotal: ৳<span id="subtotal">0</span></p>
<p>Delivery: ৳<span id="deliveryCharge">50</span></p>
<h3>Grand Total: ৳<span id="grandTotal">0</span></h3>
</div>

</div>

<button onclick="confirmOrder()">Confirm Order</button>

<script>
let user=JSON.parse(localStorage.getItem("user"));
if(!user){
window.location="account.html";
}

document.getElementById("userBox").innerHTML=`
<b>${user.name}</b><br>
${user.phone}<br>
${user.address}
`;

let cart=JSON.parse(localStorage.getItem("cart"))||[];
let subtotal=0;
let list=document.getElementById("productList");

cart.forEach(item=>{
subtotal+=Number(item.newprice);
list.innerHTML+=`
<div class="product">
<img src="${item.image}">
<div>
${item.name}<br>
৳${item.newprice}
</div>
</div>`;
});

document.getElementById("subtotal").innerText=subtotal;

function updateTotal(){
let delivery=Number(document.getElementById("delivery").value);
document.getElementById("deliveryCharge").innerText=delivery;
document.getElementById("grandTotal").innerText=subtotal+delivery;
}

updateTotal();

function confirmOrder(){
let delivery=Number(document.getElementById("delivery").value);
let grand=subtotal+delivery;

localStorage.setItem("grandTotal",grand);
localStorage.setItem("lastOrder",JSON.stringify(cart));
localStorage.removeItem("cart");

window.location="payment.html";
}
</script>

</body>
</html>
