<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout - Shahin Tech BD</title>

<style>
body{
margin:0;
font-family:Arial;
background:#f4f4f4;
padding-bottom:120px;
}

.header{
background:#111;
color:white;
padding:15px;
text-align:center;
font-size:18px;
}

.section{
background:white;
margin:10px;
padding:15px;
border-radius:10px;
}

.product{
display:flex;
justify-content:space-between;
margin-bottom:8px;
font-size:14px;
}

select{
width:100%;
padding:8px;
margin-top:10px;
border-radius:6px;
border:1px solid #ccc;
}

.total-box{
background:#fff3e0;
padding:10px;
border-radius:8px;
margin-top:10px;
font-size:14px;
}

.pay-btn{
position:fixed;
bottom:0;
left:0;
right:0;
background:#ff512f;
color:white;
border:none;
padding:15px;
font-size:16px;
}
</style>
</head>

<body>

<div class="header">Checkout</div>

<div class="section" id="userInfo"></div>

<div class="section">
<h3>Products</h3>
<div id="productList"></div>
</div>

<div class="section">
<h3>Delivery Option</h3>
<select id="delivery" onchange="updateTotal()">
<option value="50">Jaldhaka - ৳50</option>
<option value="120">Outside District - ৳120</option>
</select>

<div class="total-box" id="totalBox"></div>
</div>

<button class="pay-btn" onclick="goPayment()">Proceed to Payment</button>

<script>

let cart=JSON.parse(localStorage.getItem("cart"))||[];
let user=JSON.parse(localStorage.getItem("userData"));

if(!user){
alert("Please complete Account Information first");
window.location.href="account.html";
}

document.getElementById("userInfo").innerHTML=
"<b>"+user.name+"</b><br>"+
user.phone+"<br>"+
user.address+", "+user.upazila+", "+user.district;

let subtotal=0;

function renderProducts(){
let list=document.getElementById("productList");
list.innerHTML="";
subtotal=0;

cart.forEach(item=>{
subtotal+=item.price*item.quantity;

list.innerHTML+=`
<div class="product">
<div>${item.name} (x${item.quantity})</div>
<div>৳${item.price*item.quantity}</div>
</div>
`;
});

updateTotal();
}

function updateTotal(){
let delivery=parseInt(document.getElementById("delivery").value);
let grand=subtotal+delivery;

document.getElementById("totalBox").innerHTML=
"Subtotal: ৳"+subtotal+"<br>"+
"Delivery: ৳"+delivery+"<br><br>"+
"<b>Grand Total: ৳"+grand+"</b>";
}

function goPayment(){
localStorage.setItem("deliveryCharge",
document.getElementById("delivery").value);

window.location.href="payment.html";
}

renderProducts();

</script>

</body>
</html>
